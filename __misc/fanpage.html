<!doctype html>
<html lang="en">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <title>Justin Bieber ‚Ä¢ Fan Page (Prototype) by chatgptz</title>
  <meta name="description" content="Rapid prototype fan page for Justin Bieber built with vanilla HTML, CSS, and JavaScript." />
  <style>
    :root {
      --bg: #0b0b10;
      --panel: #141420;
      --text: #e8e8f0;
      --muted: #b9bbd1;
      --accent: #a78bfa; /* purple */
      --accent-2: #22d3ee; /* cyan */
      --ring: rgba(167, 139, 250, .45);
      --shadow: 0 10px 25px rgba(0,0,0,.35);
      --radius: 18px;
    }
    .light {
      --bg: #f7f7fb;
      --panel: #ffffff;
      --text: #1a1a27;
      --muted: #5a607a;
      --accent: #7c3aed;
      --accent-2: #0891b2;
      --ring: rgba(124, 58, 237, .35);
      --shadow: 0 10px 25px rgba(25,25,35,.12);
    }

    * { box-sizing: border-box; }
    html { scroll-behavior: smooth; }
    body {
      margin: 0;
      font: 16px/1.6 system-ui, -apple-system, Segoe UI, Roboto, Helvetica, Arial, "Apple Color Emoji", "Segoe UI Emoji";
      color: var(--text);
      background:
        radial-gradient(60vmax 60vmax at 10% -20%, rgba(124, 58, 237, .20), transparent 60%),
        radial-gradient(60vmax 60vmax at 110% 10%, rgba(34, 211, 238, .18), transparent 50%),
        linear-gradient(180deg, rgba(255,255,255,.04), rgba(255,255,255,0) 12%),
        var(--bg);
    }

    /* ---------- Topbar ---------- */
    header {
      position: sticky; top: 0; z-index: 100;
      backdrop-filter: saturate(1.2) blur(10px);
      background: color-mix(in srgb, var(--bg) 75%, transparent);
      border-bottom: 1px solid color-mix(in srgb, var(--text) 12%, transparent);
    }
    .nav {
      max-width: 1200px; margin: 0 auto; padding: 14px 18px;
      display: grid; grid-template-columns: 1fr auto 1fr; gap: 12px; align-items: center;
    }
    .brand { font-weight: 800; letter-spacing: .3px; }
    .brand span { background: linear-gradient(90deg, var(--accent), var(--accent-2)); -webkit-background-clip: text; color: transparent; }
    .links { display: flex; gap: 14px; justify-content: center; flex-wrap: wrap; }
    .links a {
      color: var(--muted); text-decoration: none; font-weight: 600; padding: 6px 10px; border-radius: 12px;
    }
    .links a:hover { color: var(--text); background: color-mix(in srgb, var(--text) 10%, transparent); }
    .right { display: flex; gap: 10px; justify-content: end; align-items: center; }
    button.icon {
      border: 1px solid color-mix(in srgb, var(--text) 12%, transparent);
      background: color-mix(in srgb, var(--panel) 70%, transparent);
      color: var(--text); border-radius: 12px; padding: 8px 12px; cursor: pointer; transition: .2s transform;
    }
    button.icon:active { transform: scale(.96); }

    /* ---------- Hero ---------- */
    .hero {
      max-width: 1200px; margin: 28px auto 0; padding: 40px 18px 20px; display: grid; gap: 22px;
      grid-template-columns: 1.2fr .8fr; align-items: center;
    }
    .hero-card {
      background: color-mix(in srgb, var(--panel) 85%, transparent);
      border: 1px solid color-mix(in srgb, var(--text) 10%, transparent);
      border-radius: var(--radius); box-shadow: var(--shadow);
      padding: 28px; position: relative; overflow: hidden;
    }
    .badge { display: inline-flex; gap: 8px; align-items: center; font-size: 12px; font-weight: 700;
      padding: 6px 10px; border-radius: 999px; color: var(--text);
      background: linear-gradient(90deg, var(--accent), var(--accent-2)); }
    .hero h1 { font-size: clamp(28px, 6vw, 56px); line-height: 1.05; margin: 14px 0 8px; }
    .hero p { color: var(--muted); max-width: 65ch; margin: 0 0 18px; }
    .cta { display:inline-flex; gap:12px; flex-wrap:wrap; }
    .btn {
      border: none; background: linear-gradient(90deg, var(--accent), var(--accent-2)); color: #fff; font-weight: 800;
      padding: 12px 16px; border-radius: 14px; cursor: pointer; box-shadow: var(--shadow);
    }
    .btn.secondary { background: transparent; color: var(--text); border: 1px dashed color-mix(in srgb, var(--text) 18%, transparent); }

    .statbar { display:grid; grid-template-columns: repeat(3,1fr); gap: 14px; margin-top: 20px; }
    .stat { background: color-mix(in srgb, var(--panel) 65%, transparent); padding: 14px; border-radius: 14px; text-align:center; }
    .stat .n { font-size: 24px; font-weight: 900; }
    .stat .t { color: var(--muted); font-size: 12px; }

    .cover {
      aspect-ratio: 4 / 5; border-radius: var(--radius);
      background:
        radial-gradient(60% 80% at 50% 20%, rgba(124,58,237,.25), transparent),
        linear-gradient(180deg, rgba(255,255,255,.1), rgba(255,255,255,0) 30%),
        url('https://upload.wikimedia.org/wikipedia/commons/thumb/2/2f/Justin_Bieber_in_2022.jpg/640px-Justin_Bieber_in_2022.jpg') center/cover no-repeat;
      border: 1px solid color-mix(in srgb, var(--text) 12%, transparent);
      box-shadow: var(--shadow);
    }

    /* ---------- Sections ---------- */
    section { max-width: 1200px; margin: 30px auto 0; padding: 18px; }
    .section-head { display:flex; justify-content: space-between; align-items: end; gap: 16px; margin-bottom: 14px; }
    .section-head h2 { margin: 0; font-size: clamp(20px, 4vw, 32px); }
    .section-head p { margin: 0; color: var(--muted); }

    .card-grid { display: grid; grid-template-columns: repeat(4, 1fr); gap: 16px; }
    .card {
      background: color-mix(in srgb, var(--panel) 80%, transparent);
      border: 1px solid color-mix(in srgb, var(--text) 10%, transparent);
      border-radius: 16px; padding: 14px; display:flex; flex-direction: column; gap: 10px;
      transition: transform .2s ease;
    }
    .card:hover { transform: translateY(-2px); }
    .album-art { aspect-ratio: 1/1; border-radius: 12px; background: linear-gradient(120deg, var(--accent), var(--accent-2)); display:grid; place-items:center; font-weight: 900; }
    .album-art.small { font-size: 18px; }
    .pill { display:inline-block; font-size: 11px; font-weight: 800; color: var(--text);
      background: color-mix(in srgb, var(--text) 12%, transparent); padding: 4px 8px; border-radius: 999px; }

    .toolbar { display:flex; flex-wrap:wrap; gap: 10px; }
    .input, select {
      background: color-mix(in srgb, var(--panel) 80%, transparent);
      color: var(--text); border: 1px solid color-mix(in srgb, var(--text) 12%, transparent);
      border-radius: 12px; padding: 10px 12px; outline: none; box-shadow: inset 0 0 0 1px transparent;
    }
    .input:focus, select:focus { box-shadow: inset 0 0 0 2px var(--ring); }

    /* ---------- Gallery ---------- */
    .gallery { display:grid; grid-template-columns: repeat(6, 1fr); gap: 8px; }
    .gallery .g { aspect-ratio: 1/1; border-radius: 12px; overflow: hidden; border:1px solid color-mix(in srgb, var(--text) 10%, transparent); }
    .gallery img { width: 100%; height: 100%; object-fit: cover; display:block; }

    /* ---------- Tour ---------- */
    .tour { width: 100%; border-collapse: collapse; overflow: hidden; border-radius: 14px; box-shadow: var(--shadow);
      border: 1px solid color-mix(in srgb, var(--text) 10%, transparent);
    }
    .tour th, .tour td { padding: 12px 14px; text-align: left; }
    .tour thead { background: color-mix(in srgb, var(--panel) 80%, transparent); }
    .tour tr:nth-child(odd) td { background: color-mix(in srgb, var(--panel) 65%, transparent); }
    .tour tr td:last-child { text-align: right; }

    /* ---------- Fan Wall ---------- */
    .wall { display:grid; grid-template-columns: 1.2fr .8fr; gap: 16px; }
    .post { background: color-mix(in srgb, var(--panel) 80%, transparent); border:1px solid color-mix(in srgb, var(--text) 10%, transparent); border-radius: 14px; padding: 12px; }
    .post h4 { margin:0 0 6px; }
    .post small { color: var(--muted); }
    .wall .controls { display:flex; gap:10px; }
    .like { cursor:pointer; border:none; background:transparent; color:var(--muted); }

    /* ---------- Footer ---------- */
    footer { margin-top: 40px; padding: 28px 18px 60px; text-align: center; color: var(--muted); }

    /* ---------- Dialog ---------- */
    dialog { border: none; padding: 0; border-radius: 16px; overflow: hidden; box-shadow: var(--shadow); background: var(--panel); color: var(--text); }
    dialog::backdrop { background: rgba(0,0,0,.5); }
    .modal-head { display:flex; justify-content: space-between; align-items:center; padding: 10px 12px; border-bottom: 1px solid color-mix(in srgb, var(--text) 10%, transparent); }

    /* ---------- Utilities ---------- */
    .hide { display:none !important; }
    .row { display:flex; gap: 8px; align-items:center; flex-wrap: wrap; }
    .chip { font-size: 12px; padding: 6px 10px; background: color-mix(in srgb, var(--text) 10%, transparent); border-radius: 999px; }

    /* ---------- Responsive ---------- */
    @media (max-width: 960px) {
      .hero { grid-template-columns: 1fr; }
      .wall { grid-template-columns: 1fr; }
      .card-grid { grid-template-columns: repeat(2, 1fr); }
      .gallery { grid-template-columns: repeat(3, 1fr); }
    }
    @media (max-width: 560px) {
      .links { display:none; }
      .card-grid { grid-template-columns: 1fr; }
      .gallery { grid-template-columns: repeat(2, 1fr); }
    }
  </style>
</head>
<body>
  <header>
    <nav class="nav" aria-label="Main">
      <div class="brand">Bieber<span>Nation</span></div>
      <div class="links">
        <a href="#music">Music</a>
        <a href="#gallery">Gallery</a>
        <a href="#tour">Tour</a>
        <a href="#fanwall">Fan Wall</a>
        <a href="#newsletter">Newsletter</a>
      </div>
      <div class="right">
        <button class="icon" id="themeBtn" title="Toggle theme" aria-label="Toggle theme">üåó</button>
        <button class="icon" id="playTrailer" title="Play video" aria-label="Play video">‚ñ∂Ô∏è Watch</button>
      </div>
    </nav>
  </header>

  <main>
    <!-- Hero -->
    <section class="hero">
      <div class="hero-card">
        <span class="badge" aria-hidden="true">Official Fan Prototype</span>
        <h1>Justin Bieber</h1>
        <p>ITS NOT CLOCKING TO YOU THAT IM STANDING ON BUSINESS</p>
        <div class="cta">
          <a href="#music" class="btn">Explore Music</a>
          <button class="btn secondary" id="shuffleSong">Shuffle a Song</button>
        </div>
        <div class="statbar" role="group" aria-label="Stats">
          <div class="stat"><div class="n" data-count="150">0</div><div class="t">+ Songs</div></div>
          <div class="stat"><div class="n" data-count="25">0</div><div class="t">Awards</div></div>
          <div class="stat"><div class="n" data-count="15">0</div><div class="t">Albums/EPs</div></div>
        </div>
      </div>
      <!-- <div class="cover" role="img" aria-label="Justin Bieber portrait"></div> -->
      <img src="justin1.jpg" alt="Justin Bieber" class="gallery-img">

    </section>

    <!-- Music / Discography -->
    <section id="music">
      <div class="section-head">
        <div>
          <h2>Discography</h2>
          <p>Search and filter albums & standout tracks.</p>
        </div>
        <div class="toolbar">
          <input class="input" id="search" placeholder="Search album or track‚Ä¶" aria-label="Search" />
          <select id="year" aria-label="Filter by year">
            <option value="">All years</option>
          </select>
          <button class="icon" id="clearFilters">Clear</button>
        </div>
      </div>
      <div class="card-grid" id="albumGrid"></div>
    </section>

    <!-- Gallery -->
    <section id="gallery">
      <div class="section-head">
        <h2>Gallery</h2>
        <p>Highlights through the years</p>
      </div>
      <div class="gallery" id="galleryGrid" aria-live="polite"></div>
    </section>

    <!-- Tour -->
    <section id="tour">
      <div class="section-head">
        <h2>Tour (Sample Data)</h2>
        <p>Hypothetical upcoming dates for layout testing.</p>
      </div>
      <div class="toolbar" style="margin-bottom:10px;">
        <input id="tourSearch" class="input" placeholder="Filter by city or country"/>
        <span class="chip" id="tourCount">0 shows</span>
      </div>
      <div style="overflow:auto;">
        <table class="tour" id="tourTable" aria-label="Tour dates table">
          <thead>
            <tr><th>Date</th><th>City</th><th>Venue</th><th></th></tr>
          </thead>
          <tbody></tbody>
        </table>
      </div>
    </section>

    <!-- Fan Wall -->
    <section id="fanwall">
      <div class="section-head">
        <h2>Fan Wall</h2>
        <p>Leave a message for fellow Beliebers. Stored locally in your browser.</p>
      </div>
      <div class="wall">
        <div>
          <div class="row" style="margin-bottom:8px;">
            <input id="name" class="input" placeholder="Your name" style="flex:1 1 180px;"/>
            <input id="location" class="input" placeholder="Location" style="flex:1 1 180px;"/>
          </div>
          <textarea id="message" class="input" style="width:100%; min-height:90px;" placeholder="Your message‚Ä¶"></textarea>
          <div class="row" style="margin-top:8px; justify-content: space-between;">
            <div>
              <label class="chip"><input type="checkbox" id="pin"/> Pin</label>
            </div>
            <button class="btn" id="postBtn">Post Message</button>
          </div>
        </div>
        <div>
          <div class="row" style="justify-content:space-between; margin-bottom:8px;">
            <strong>Recent Posts</strong>
            <button class="icon" id="clearWall">Clear All</button>
          </div>
          <div id="posts" style="display:grid; gap:10px;"></div>
        </div>
      </div>
    </section>

    <!-- Newsletter -->
    <section id="newsletter">
      <div class="section-head">
        <h2>Newsletter</h2>
        <p>Get updates (prototype only). Email is stored in localStorage.</p>
      </div>
      <form id="newsForm" class="row" onsubmit="return false;">
        <input id="email" class="input" type="email" placeholder="your@email.com" required aria-label="Email address"/>
        <button class="btn" id="subscribe">Subscribe</button>
        <span id="newsMsg" class="chip" role="status" aria-live="polite"></span>
      </form>
    </section>
  </main>

  <footer>
    <div class="row" style="justify-content:center; gap: 6px;">
      <span>Made with ‚ô• using vanilla web tech.</span>
      <span class="chip">Prototype</span>
    </div>
  </footer>

  <!-- Video Modal -->
  <dialog id="trailer">
    <div class="modal-head">
      <strong>Justin Bieber ‚Äî Peaches (Live)</strong>
      <button class="icon" id="closeTrailer">‚úñ</button>
    </div>
    <div style="width:min(92vw, 880px); aspect-ratio: 16/9;">
      <iframe id="yt" width="100%" height="100%" src="https://www.youtube.com/embed/tQ0yjYUFKAE?rel=0" title="YouTube video" allow="accelerometer; autoplay; clipboard-write; encrypted-media; gyroscope; picture-in-picture" allowfullscreen></iframe>
    </div>
  </dialog>

  <button id="toTop" class="icon" style="position:fixed; right:16px; bottom:16px; display:none;">‚Üë Top</button>

  <script>
    // ---------- Theme ----------
    const themeBtn = document.getElementById('themeBtn');
    const storedTheme = localStorage.getItem('theme');
    if (storedTheme === 'light') document.documentElement.classList.add('light');
    themeBtn.addEventListener('click', () => {
      document.documentElement.classList.toggle('light');
      localStorage.setItem('theme', document.documentElement.classList.contains('light') ? 'light' : 'dark');
    });

    // ---------- Counters ----------
    const counters = [...document.querySelectorAll('.stat .n')];
    const observer = new IntersectionObserver((entries) => {
      entries.forEach((e) => {
        if (e.isIntersecting) {
          const el = e.target; const end = +el.dataset.count; let i = 0;
          const tick = () => { i += Math.ceil(end/60); el.textContent = Math.min(i, end); if (i < end) requestAnimationFrame(tick); };
          tick(); observer.unobserve(el);
        }
      });
    }, { threshold: .5 });
    counters.forEach(c => observer.observe(c));

    // ---------- Trailer Modal ----------
    const trailer = document.getElementById('trailer');
    const playTrailer = document.getElementById('playTrailer');
    const closeTrailer = document.getElementById('closeTrailer');
    playTrailer.addEventListener('click', () => trailer.showModal());
    closeTrailer.addEventListener('click', () => {
      trailer.close();
      document.getElementById('yt').src = ''; // stop video
    });
    // ---------- Discography Data (sample) ----------
    const albums = [
      { title: 'Justice', year: 2021, tracks: ['Peaches', 'Hold On', "Anyone"], color: '#10b981' },
      { title: 'Changes', year: 2020, tracks: ['Yummy', 'Intentions', 'Forever'], color: '#f97316' },
      { title: 'Purpose', year: 2015, tracks: ['What Do You Mean?', 'Sorry', 'Love Yourself'], color: '#3b82f6' },
      { title: 'Believe', year: 2012, tracks: ['Boyfriend', 'Beauty and a Beat', 'As Long As You Love Me'], color: '#eab308' },
      { title: 'Under the Mistletoe', year: 2011, tracks: ['Mistletoe', 'Drummer Boy'], color: '#ef4444' },
      { title: 'My World 2.0', year: 2010, tracks: ['Baby', 'Eenie Meenie', 'Somebody to Love'], color: '#a855f7' },
      { title: 'My World', year: 2009, tracks: ['One Time', 'One Less Lonely Girl'], color: '#06b6d4' },
    ];

    const trackLinks = {
      'Peaches': 'https://www.youtube.com/embed/tQ0yjYUFKAE',
      'Hold On': 'https://www.youtube.com/embed/3AyMjyHu1bA',
      'Anyone': 'https://www.youtube.com/embed/KRvn1b8vEOw',
      'Yummy': 'https://www.youtube.com/embed/8EJ3zbKTWQ8',
      'Intentions': 'https://www.youtube.com/embed/6M1H2mv6GI0',
      'Forever': 'https://www.youtube.com/embed/mYfJxlgR2jw',
      'What Do You Mean?': 'https://www.youtube.com/embed/DK_0jXPuIr0',
      'Sorry': 'https://www.youtube.com/embed/fRh_vgS2dFE',
      'Love Yourself': 'https://www.youtube.com/embed/oyEuk8j8imI',
      'Boyfriend': 'https://www.youtube.com/embed/4GuqB1BQVr4',
      'Beauty and a Beat': 'https://www.youtube.com/embed/4GuqB1BQVr4',
      'As Long As You Love Me': 'https://www.youtube.com/embed/R4em3LKQCAQ',
      'Mistletoe': 'https://www.youtube.com/embed/L6S5NUoUIXY',
      'Drummer Boy': 'https://www.youtube.com/embed/QcAbmGPd3Hk',
      'Baby': 'https://www.youtube.com/embed/kffacxfA7G4',
      'Eenie Meenie': 'https://www.youtube.com/embed/prmmCg5bKxA',
      'Somebody to Love': 'https://www.youtube.com/embed/4Xjgw36kdlI',
      'One Time': 'https://www.youtube.com/embed/CHVhwcOg6y8',
      'One Less Lonely Girl': 'https://www.youtube.com/embed/LXUSaVw3Mvk'
    };


    const albumGrid = document.getElementById('albumGrid');
    const search = document.getElementById('search');
    const year = document.getElementById('year');
    const clearFilters = document.getElementById('clearFilters');

    // Populate year options
    [...new Set(albums.map(a => a.year))].sort((a,b)=>b-a).forEach(y => {
      const o = document.createElement('option'); o.value = y; o.textContent = y; year.appendChild(o);
    });

    function renderAlbums() {
      const q = search.value.trim().toLowerCase();
      const y = year.value;
      const filtered = albums.filter(a => {
        const inYear = y ? a.year == y : true;
        const inText = !q || a.title.toLowerCase().includes(q) || a.tracks.some(t => t.toLowerCase().includes(q));
        return inYear && inText;
      });
      albumGrid.innerHTML = '';
      filtered.forEach(a => {
        const card = document.createElement('article'); card.className = 'card';
        card.innerHTML = `
          <div class="album-art" style="background: linear-gradient(120deg, ${a.color}, var(--accent));">${a.title}</div>
          <div class="row" style="justify-content:space-between;">
            <strong>${a.title}</strong>
            <span class="pill">${a.year}</span>
          </div>
          <div style="color:var(--muted)">Top tracks: ${a.tracks.join(', ')}</div>
          <div class="row">
            <button class="icon" data-play="${a.tracks[0]}">‚ñ∂Ô∏è Play</button>
            <button class="icon" data-fav="${a.title}">‚òÜ Favorite</button>
          </div>
        `;
        albumGrid.appendChild(card);
      });
      if (!filtered.length) albumGrid.innerHTML = '<p>No results. Try clearing filters.</p>';
    }

    renderAlbums();
    search.addEventListener('input', renderAlbums);
    year.addEventListener('change', renderAlbums);
    clearFilters.addEventListener('click', () => { search.value=''; year.value=''; renderAlbums(); });

    albumGrid.addEventListener('click', (e) => {
      const play = e.target.closest('[data-play]');
      const fav = e.target.closest('[data-fav]');
      if (play) {
        const track = play.dataset.play;
        const url = trackLinks[track] || 'https://www.youtube.com/embed/tQ0yjYUFKAE'; // fallback
        document.getElementById('yt').src = url + '?autoplay=1';
        trailer.showModal();
      }
      if (fav) {
        const f = JSON.parse(localStorage.getItem('favorites')||'[]');
        if (!f.includes(fav.dataset.fav)) f.push(fav.dataset.fav);
        localStorage.setItem('favorites', JSON.stringify(f));
        alert('Added to favorites: ' + fav.dataset.fav);
      }
    });

    // Shuffle song button
    document.getElementById('shuffleSong').addEventListener('click', () => {
      const tracks = albums.flatMap(a => a.tracks.map(t => `${t} ‚Äî ${a.title} (${a.year})`));
      const pick = tracks[Math.floor(Math.random()*tracks.length)];
      alert('Random pick: ' + pick);
    });

 // ---------- Gallery (local images) ----------
const gallery = document.getElementById('galleryGrid');

// Repeat the same local image multiple times (or add different local files if available)
const pics = [
  'justin1.jpg',
  'justin1.jpg',
  'justin1.jpg',
  'justin1.jpg',
  'justin1.jpg',
  'justin1.jpg'
];

pics.forEach(src => {
  const wrap = document.createElement('div');
  wrap.className = 'g';
  const img = new Image();
  img.loading = 'lazy';
  img.src = src; // Local path
  img.alt = 'Justin Bieber photo';
  wrap.appendChild(img);
  gallery.appendChild(wrap);
});

    // ---------- Tour (sample, mock) ----------
    const tourData = [
      { date: '2025-11-12', city: 'Singapore', country: 'Singapore', venue: 'National Stadium' },
      { date: '2025-11-16', city: 'Bangkok', country: 'Thailand', venue: 'Impact Arena' },
      { date: '2025-11-20', city: 'Tokyo', country: 'Japan', venue: 'Tokyo Dome' },
      { date: '2025-12-01', city: 'Seoul', country: 'South Korea', venue: 'KSPO Dome' },
      { date: '2026-01-10', city: 'Sydney', country: 'Australia', venue: 'Qudos Bank Arena' },
      { date: '2026-02-05', city: 'Los Angeles', country: 'USA', venue: 'Crypto.com Arena' },
      { date: '2026-02-12', city: 'Toronto', country: 'Canada', venue: 'Scotiabank Arena' },
      { date: '2026-03-01', city: 'London', country: 'UK', venue: 'The O2' },
    ];

    const tourTable = document.getElementById('tourTable').querySelector('tbody');
    const tourSearch = document.getElementById('tourSearch');
    const tourCount = document.getElementById('tourCount');

    function renderTour() {
      const q = tourSearch.value.trim().toLowerCase();
      const filtered = tourData.filter(t => !q || t.city.toLowerCase().includes(q) || t.country.toLowerCase().includes(q));
      tourTable.innerHTML = '';
      filtered.forEach(t => {
        const tr = document.createElement('tr');
        const d = new Date(t.date + 'T00:00:00');
        tr.innerHTML = `
          <td>${d.toLocaleDateString(undefined, { year:'numeric', month:'short', day:'numeric' })}</td>
          <td>${t.city}, ${t.country}</td>
          <td>${t.venue}</td>
          <td><button class="icon" data-ticket='${JSON.stringify(t)}'>Tickets</button></td>
        `;
        tourTable.appendChild(tr);
      });
      tourCount.textContent = `${filtered.length} show${filtered.length!==1?'s':''}`;
    }

    renderTour();
    tourSearch.addEventListener('input', renderTour);
    document.getElementById('tourTable').addEventListener('click', (e) => {
      const btn = e.target.closest('[data-ticket]');
      if (!btn) return;
      const info = JSON.parse(btn.dataset.ticket);
      alert(`(Prototype) Ticket link for ${info.city} ‚Äî ${info.venue}`);
    });

    // ---------- Fan Wall (localStorage) ----------
    const postsEl = document.getElementById('posts');
    const postBtn = document.getElementById('postBtn');
    const clearWall = document.getElementById('clearWall');

    function getPosts(){ return JSON.parse(localStorage.getItem('jb_posts')||'[]'); }
    function setPosts(v){ localStorage.setItem('jb_posts', JSON.stringify(v)); }

    function renderPosts(){
      const posts = getPosts().sort((a,b)=> (b.pinned - a.pinned) || b.time - a.time );
      postsEl.innerHTML = '';
      posts.forEach((p, i) => {
        const el = document.createElement('div'); el.className = 'post';
        el.innerHTML = `
          <h4>${p.name || 'Anonymous'} ${p.pinned ? '<span class="pill">üìå Pinned</span>' : ''}</h4>
          <small>${new Date(p.time).toLocaleString()} ‚Ä¢ ${p.location || '‚Äî'}</small>
          <p style="margin:8px 0;">${p.message.replace(/</g,'&lt;')}</p>
          <div class="row" style="justify-content:space-between;">
            <div class="row">
              <button class="like" data-like="${i}">‚ù§Ô∏è ${p.likes||0}</button>
              <button class="like" data-pin="${i}">${p.pinned? 'Unpin' : 'Pin'}</button>
            </div>
            <button class="icon" data-del="${i}">Delete</button>
          </div>
        `;
        postsEl.appendChild(el);
      });
    }

    postBtn.addEventListener('click', () => {
      const name = document.getElementById('name').value.trim();
      const location = document.getElementById('location').value.trim();
      const message = document.getElementById('message').value.trim();
      const pinned = document.getElementById('pin').checked ? 1 : 0;
      if (!message) return alert('Please write a message.');
      const posts = getPosts();
      posts.push({ name, location, message, time: Date.now(), likes: 0, pinned });
      setPosts(posts);
      document.getElementById('message').value='';
      renderPosts();
    });

    postsEl.addEventListener('click', (e)=>{
      const like = e.target.closest('[data-like]');
      const del = e.target.closest('[data-del]');
      const pin = e.target.closest('[data-pin]');
      const posts = getPosts();
      if (like){ posts[+like.dataset.like].likes = (posts[+like.dataset.like].likes || 0) + 1; }
      if (del){ posts.splice(+del.dataset.del,1); }
      if (pin){ posts[+pin.dataset.pin].pinned = posts[+pin.dataset.pin].pinned?0:1; }
      setPosts(posts); renderPosts();
    });

    clearWall.addEventListener('click', () => { if (confirm('Clear all posts?')) { localStorage.removeItem('jb_posts'); renderPosts(); } });
    renderPosts();

    // ---------- Newsletter ----------
    const newsForm = document.getElementById('newsForm');
    const email = document.getElementById('email');
    const newsMsg = document.getElementById('newsMsg');
    newsForm.addEventListener('submit', () => {
      const val = email.value.trim();
      if (!/^[^\s@]+@[^\s@]+\.[^\s@]+$/.test(val)) { newsMsg.textContent = 'Please enter a valid email.'; return; }
      const list = JSON.parse(localStorage.getItem('jb_news')||'[]');
      if (!list.includes(val)) list.push(val);
      localStorage.setItem('jb_news', JSON.stringify(list));
      newsMsg.textContent = 'Subscribed! (Stored locally)';
      email.value = '';
    });

    // ---------- Utilities ----------
    const toTop = document.getElementById('toTop');
    window.addEventListener('scroll', () => { toTop.style.display = window.scrollY > 800 ? 'block' : 'none'; });
    toTop.addEventListener('click', () => window.scrollTo({ top: 0, behavior: 'smooth' }));
  </script>
</body>
</html>
